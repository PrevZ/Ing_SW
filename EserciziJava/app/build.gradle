/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java application project to get you started.
 * For more details on building Java & JVM projects, please refer to https://docs.gradle.org/8.10.2/userguide/building_java_projects.html in the Gradle documentation.
 */

plugins {
    id 'java'
    id 'application'
}

repositories {
    // Use Maven Central for resolving dependencies.
    mavenCentral()
}

dependencies {
    // Use JUnit Jupiter for testing.
    testImplementation 'junit:junit:4.13.2'

    // This dependency is used by the application.
    implementation libs.guava
}

java {
    sourceCompatibility = JavaVersion.VERSION_17
    targetCompatibility = JavaVersion.VERSION_17
}

// Task per eseguire esercizi specifici
task runExercise(type: JavaExec) {
    group = 'application'
    description = 'Run a specific exercise'
    
    if (project.hasProperty('exercise')) {
        def exerciseNum = project.property('exercise')
        
        // Determina la classe principale basata sull'esercizio
        switch(exerciseNum) {
            case 'Es01':
                main = 'HelloWorld'
                break
            case 'Es02':
                main = 'SommaNumeri'
                break
            case 'Es03':
                main = 'CalcolaArea'
                break
            case 'Es04':
                main = 'NumeriPariDispari'
                break
            case 'Es05':
                main = 'Calcolatrice'
                break
            case 'Es06':
                main = 'GestioneStudenti'
                break
            case 'Es07':
                main = 'ContatoreParole'
                break
            case 'Es08':
                main = 'GestioneInventario'
                break
            case 'Es09':
                main = 'TestPersona'
                break
            case 'Es10':
                main = 'Calcolatrice'
                break
            case 'Es11':
                main = 'MagazzinoProdotti'
                break
            case 'Es12':
                main = 'RegistroPresenze'
                break
            case 'Es13':
                main = 'TestMacchine'
                break
            case 'Es14':
                main = 'ParoleLunghe'
                break
            case 'Es15':
                main = 'Biblioteca'
                break
            case 'Es16':
                main = 'TestStack'
                break
            case 'Es17':
                main = 'Scacchiera'
                break
            case 'Es18':
                main = 'OrdinaParole'
                break
            case 'Es19':
                main = 'TestPagabile'
                break
            case 'Es20':
                main = 'DiarioDiBordo'
                break
            case 'Es21':
                main = 'CinemaPrenotazioni'
                break
            case 'Es22':
                main = 'GestioneOrdini'
                break
            case 'Es23':
                main = 'RegistroMedico'
                break
            case 'Es24':
                main = 'GestioneCatalogo'
                break
            case 'Es25':
                main = 'SistemaBancario'
                break
            case 'Es26':
                main = 'GestioneFileStudenti'
                break
            case 'Es27':
                main = 'ParserJSONManuale'
                break
            case 'Es28':
                main = 'MagazzinoMulticlasse'
                break
            case 'Es29':
                main = 'GestionePlaylist'
                break
            case 'Es30':
                main = 'RubricaAvanzata'
                break
            case 'Es31':
                main = 'SistemaLogin'
                break
            case 'Es32':
                main = 'TestLogger'
                break
            case 'Es33':
                main = 'GestioneParcheggio'
                break
            case 'Es34':
                main = 'Main' // o il nome della classe principale
                break
            case 'Es35':
                main = 'Main'
                break
            case 'Es36':
                main = 'Main'
                break
            case 'Es37':
                main = 'Main'
                break
            case 'Es38':
                main = 'Main'
                break
            case 'Es39':
                main = 'Main'
                break
            case 'Es40':
                main = 'Main'
                break
            case 'Es41':
                main = 'GestionePlaylist'
                break
            case 'Es42':
                main = 'RubricaAvanzata'
                break
            case 'Es43':
                main = 'SistemaLogin'
                break
            case 'Es44':
                main = 'TestLogger'
                break
            case 'Es45':
                main = 'GestioneParcheggio'
                break
            default:
                main = 'Main'
        }
        
        classpath = sourceSets.main.runtimeClasspath
        
        // Passa gli argomenti se forniti
        if (project.hasProperty('args')) {
            args = project.property('args').split(',')
        }
    }
}

// Task per compilare tutti gli esercizi
task compileAllExercises {
    group = 'build'
    description = 'Compile all exercises'
    dependsOn 'compileJava'
}

// Task per elencare esercizi disponibili
task listExercises {
    group = 'help'
    description = 'List all available exercises'
    doLast {
        println "Esercizi disponibili:"
        def exercises = [
            'Es01': 'Sistema di Veicoli',
            'Es02': 'Sistema Biblioteca',
            'Es03': 'Gestione Animali',
            'Es04': 'Sistema Aziendale',
            'Es05': 'Calcolatrice Base',
            'Es06': 'Gestione Studenti',
            'Es07': 'Contatore Parole',
            'Es08': 'Gestione Inventario',
            'Es09': 'Incapsulamento Base',
            'Es10': 'Calcolatrice con switch',
            'Es11': 'Magazzino Prodotti',
            'Es12': 'Registro Presenze',
            'Es13': 'Macchina Astratta',
            'Es14': 'Parole Lunghe',
            'Es15': 'Biblioteca',
            'Es16': 'Stack Generico',
            'Es17': 'Scacchiera',
            'Es18': 'Ordina Parole',
            'Es19': 'Interfaccia Pagabile',
            'Es20': 'Diario di Bordo',
            'Es21': 'Sistema Prenotazione Cinema',
            'Es22': 'Gestione Ordini',
            'Es23': 'Magazzino Prodotti',
            'Es24': 'Registro Presenze',
            'Es25': 'Macchina Astratta',
            'Es26': 'Parole Lunghe',
            'Es27': 'Biblioteca',
            'Es28': 'Stack Generico',
            'Es29': 'Scacchiera',
            'Es30': 'Ordina Parole',
            'Es31': 'Interfaccia Pagabile',
            'Es32': 'Diario di Bordo',
            'Es33': 'Sistema Prenotazione Cinema',
            'Es34': 'Gestione Ordini',
            'Es35': 'Registro Medico',
            'Es36': 'Catalogo Prodotti',
            'Es37': 'Sistema Banca',
            'Es38': 'Gestione File Studenti',
            'Es39': 'Parser JSON Manuale',
            'Es40': 'Magazzino Multiclasse',
            'Es41': 'Gestione Playlist',
            'Es42': 'Rubrica Avanzata',
            'Es43': 'Sistema Login',
            'Es44': 'File Logger',
            'Es45': 'Parcheggio'
        ]
        
        exercises.each { key, value ->
            println "  - ${key}: ${value}"
        }
    }
}
